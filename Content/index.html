<html>
<head>
  <meta name="description" content="An Azure Website Site Extension for PHP Package Management via Composer">
  <meta name="keywords" content="PHP, Composer, Package Management">
  <meta name="author" content="Cory Fowler">

  <title>Composer - Site Extension</title>

  <link rel="stylesheet" href="lib/bootstrap/css/bootstrap.min.css" />
  <link rel="stylesheet" href="lib/bootstrap/css/bootstrap-theme.min.css" />
</head>
<body>

<div class="alert alert-warning" style="text-align: center" role="alert"><strong>Notice:</strong> This Extension has implemented a custom deployment script via the <a href="https://github.com/projectkudu/kudu/wiki/Deployment-hooks">kudu deployment hook</a>. Please do not add a deployment hook, unless you copy the <a href="#ComposerScript">code</a> below into it.</div>

<div style="width: 790px;margin: auto auto;">

<h1>Composer Site Extension for Azure Websites.</h1>
<p>This site extension enables Composer support in Web Sites.</p>

<h2 style="padding-bottom: 10px;">Usage</h2>

<div class="panel panel-primary">
  <div class="panel-heading">
    <h3 class="panel-title">Command Line</h3>
  </div>
  <div class="panel-body">
    <p>If you would like to manage composer from the command-line, you can use the <a href="/DebugConsole">DebugConsole</a> or <a href="https://www.npmjs.org/package/kuduexec" target="_new">KuduExec</a>.</p>
  </div>
<ul class="list-group">
<li class="list-group-item"><strong>Install Dependencies</strong><p><code>composer install [%COMPOSER_ARGS%]</code></p></li>
<li class="list-group-item"><strong>Update Composer</strong><p><code>composer self-update</code></p></li>
<li class="list-group-item"><strong>New Project</strong><p><code>composer init</code></p></li>
</ul>
</div>

<a name="ComposerScript"></a>
<div class="panel panel-primary">
<div class="panel-heading">
<h3 class="panel-title">On Deployment</h3>
</div>
<div class="panel-body">
<p><code>Composer Install</code> will be called on <em>Git Deployment</em> by <strong>default</strong>.</p>
</div>
<ul class="list-group">
<li class="list-group-item">
<strong>Customize the Deployment</strong>
<p>If you would like to create a further customized deployment script, paste the following code into your deploy.cmd file before the <em>Deployment</em> section.</p>
<p>
<pre>
::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
:: Download Dependencies with Composer
:: -----------------

composer install %COMPOSER_ARGS%
</pre>
</p>
</li>
</ul>
</div>

<h2>Environment Variables</h2>
<p>These are environment variables added by this site extension.</p>
<table class="table table-hover" style="font-size:smaller;">
<tr>
<th>Name</th>
<th>Value</th>
<th>Info</th>
</tr>
<tr>
<td>COMMAND</td>
<td>d:\home\SiteExtensions\ComposerExtension\Deployment\deploy.cmd</td>
<td>Deployment Script which is replacing the default kudu deployment script.</td>
</tr>
<tr>
<td>PATH</td>
<td>D:\Windows\Microsoft.NET\Framework\v4.0.30319;D:\Program Files (x86)\Git\bin;D:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\CommonExtensions\Microsoft\TestWindow;D:\Program Files (x86)\Microsoft SQL Server\110\Tools\Binn;D:\Program Files (x86)\SiteExtensions\Kudu\28.31006.1184\bin\scripts;D:\Program Files (x86)\npm\1.4.10;C:\DWASFiles\Sites\~1site-name\AppData\npm;D:\Windows\Microsoft.NET\Framework\v4.0.30319;D:\Program Files (x86)\Git\bin;D:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\CommonExtensions\Microsoft\TestWindow;D:\Program Files (x86)\Microsoft SQL Server\110\Tools\Binn;D:\Program Files (x86)\SiteExtensions\Kudu\28.31006.1184\bin\scripts;D:\Program Files (x86)\npm\1.4.10;C:\DWASFiles\Sites\~1site-name\AppData\npm;D:\Program Files (x86)\nodejs\0.10.29;D:\Windows\system32;D:\Windows;D:\Windows\System32\Wbem;D:\Windows\System32\WindowsPowerShell\v1.0\;D:\Users\Administrator\AppData\Roaming\npm;D:\Program Files (x86)\nodejs\;d:\Program Files (x86)\Microsoft ASP.NET\ASP.NET Web Pages\v1.0\;D:\Program Files (x86)\Mercurial\;D:\Program Files\MySQL\MySQL Server 5.1\bin;D:\Program Files (x86)\PHP\v5.4;D:\Python27;
;d:\home\SiteExtensions\ComposerExtension\Composer</td>
<td>Adds the Composer directory to the default Azure Websites path.</td>
</tr>
<tr>
<td>COMPOSER_ARGS</td>
<td>--prefer-dist --no-dev --optimize-autoloader</td>
<td>Composer install arguments used by the deployment script.</td>
</tr>
</table>

</div>
</body>
</html>